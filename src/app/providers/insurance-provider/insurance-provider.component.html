<form [formGroup]="insuranceProviderForm">
	<div class="form-group" >
		<label class="row col" for="{{this.element_id}}_provider_name">Name:</label>
		<div class="row">
			<div class="col-md-10">
				<input 
					class="form-control" 
					id="{{this.element_id}}_provider_name" 
					name="name"
					formControlName="name"
				>
			</div>
			<div class="col">
				<button class="button-remove-provider btn btn-outline-danger" (click)="removeProvider()">remove</button>
			</div>
		</div>
	</div>
	<div class="form-group">
		<label class="row col" for="{{this.element_id}}_provider_coverage_part">Coverage part (%):</label>
		<div class="row">
			<div class="col-md-10">
				<input 
					class="form-control" 
					id="{{this.element_id}}_provider_coverage_part" 
					name="coverage_part"
					formControlName="coverage_part"
				>
			</div>
		</div>
	</div>

	<div class="form-group" formArrayName="prices">
		<label class="row col">Prices:</label>
		
		@for (price of provider.prices; track $index) {
			<div [formGroupName]="$index" class="row row-provider-price">
				<div class="col mt-2">
					Age
				</div>
				<div class="col mt-2" formGroupName="period">
					<input 
						class="form-control" 
						name="period_start" 
						placeholder="Age at period start" 
						type="number" 
						min="16" 
						max="70"
						formControlName="start"
					>
				</div>
				<div class="col mt-2">
					- 
				</div>
				<div class="col mt-2" formGroupName="period">
					<input 
						class="form-control" 
						name="period_end"
						placeholder="Age at period end" 
						type="number" 
						min="16" 
						max="70"
						formControlName="end"
					>
				</div>
				<div class="col mt-2">
					:
				</div>
				<div class="col mt-2">
					<input 
						class="form-control" 
						name="period_price" 
						placeholder="Price" 
						type="number" 
						min="0" 
						max="999" 
						step="0.1"
						formControlName="price"
					>
				</div>
				<div class="col mt-2">
					<button class="button-remove-price btn btn-outline-danger" (click)="removePrice($index)">remove</button>
				</div>
			</div>
		}

		@if (provider.prices.length === 0) {
			<div class="row">no prices added</div>
		}
		
		<div class="row">
			<div class="col btn-toolbar m-2" role="toolbar">
				<button class="button-add-price btn btn-outline-primary float-right" (click)="addPrice()">add price</button>
			</div>
		</div>
	</div>
</form>